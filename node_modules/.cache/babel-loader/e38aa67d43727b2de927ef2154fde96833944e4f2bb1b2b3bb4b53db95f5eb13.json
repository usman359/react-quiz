{"ast":null,"code":"import _slicedToArray from\"/Users/muhammadusman/Downloads/ultimate-react-course-main/10-react-quiz/final/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/muhammadusman/Downloads/ultimate-react-course-main/10-react-quiz/final/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useContext,useReducer,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var QuizContext=/*#__PURE__*/createContext();var SECS_PER_QUESTION=30;var initialState={questions:[],// 'loading', 'error', 'ready', 'active', 'finished'\nstatus:\"loading\",index:0,answer:null,points:0,highscore:0,secondsRemaining:null};function reducer(state,action){switch(action.type){case\"dataReceived\":return _objectSpread(_objectSpread({},state),{},{questions:action.payload,status:\"ready\"});case\"dataFailed\":return _objectSpread(_objectSpread({},state),{},{status:\"error\"});case\"start\":return _objectSpread(_objectSpread({},state),{},{status:\"active\",secondsRemaining:state.questions.length*SECS_PER_QUESTION});case\"newAnswer\":var question=state.questions.at(state.index);return _objectSpread(_objectSpread({},state),{},{answer:action.payload,points:action.payload===question.correctOption?state.points+question.points:state.points});case\"nextQuestion\":return _objectSpread(_objectSpread({},state),{},{index:state.index+1,answer:null});case\"finish\":return _objectSpread(_objectSpread({},state),{},{status:\"finished\",highscore:state.points>state.highscore?state.points:state.highscore});case\"restart\":return _objectSpread(_objectSpread({},initialState),{},{questions:state.questions,status:\"ready\"});case\"tick\":return _objectSpread(_objectSpread({},state),{},{secondsRemaining:state.secondsRemaining-1,status:state.secondsRemaining===0?\"finished\":state.status});default:throw new Error(\"Action unkonwn\");}}function QuizProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],questions=_useReducer2$.questions,status=_useReducer2$.status,index=_useReducer2$.index,answer=_useReducer2$.answer,points=_useReducer2$.points,highscore=_useReducer2$.highscore,secondsRemaining=_useReducer2$.secondsRemaining,dispatch=_useReducer2[1];var numQuestions=questions.length;var maxPossiblePoints=questions.reduce(function(prev,cur){return prev+cur.points;},0);useEffect(function(){// fetch(\"http://localhost:9000/questions\")\nfetch(\"/questions.json\").then(function(res){return res.json();}).then(function(data){return dispatch({type:\"dataReceived\",payload:data.questions});}).catch(function(err){return dispatch({type:\"dataFailed\"});});},[]);return/*#__PURE__*/_jsx(QuizContext.Provider,{value:{questions:questions,status:status,index:index,answer:answer,points:points,highscore:highscore,secondsRemaining:secondsRemaining,numQuestions:numQuestions,maxPossiblePoints:maxPossiblePoints,dispatch:dispatch},children:children});}function useQuiz(){var context=useContext(QuizContext);if(context===undefined)throw new Error(\"QuizContext was used outside of the QuizProvider\");return context;}export{QuizProvider,useQuiz};","map":{"version":3,"names":["createContext","useContext","useReducer","useEffect","jsx","_jsx","QuizContext","SECS_PER_QUESTION","initialState","questions","status","index","answer","points","highscore","secondsRemaining","reducer","state","action","type","_objectSpread","payload","length","question","at","correctOption","Error","QuizProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","_useReducer2$","dispatch","numQuestions","maxPossiblePoints","reduce","prev","cur","fetch","then","res","json","data","catch","err","Provider","value","useQuiz","context","undefined"],"sources":["/Users/muhammadusman/Downloads/ultimate-react-course-main/10-react-quiz/final/src/contexts/QuizContext.js"],"sourcesContent":["import { createContext, useContext, useReducer, useEffect } from \"react\";\n\nconst QuizContext = createContext();\n\nconst SECS_PER_QUESTION = 30;\n\nconst initialState = {\n  questions: [],\n\n  // 'loading', 'error', 'ready', 'active', 'finished'\n  status: \"loading\",\n  index: 0,\n  answer: null,\n  points: 0,\n  highscore: 0,\n  secondsRemaining: null,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"dataReceived\":\n      return {\n        ...state,\n        questions: action.payload,\n        status: \"ready\",\n      };\n    case \"dataFailed\":\n      return {\n        ...state,\n        status: \"error\",\n      };\n    case \"start\":\n      return {\n        ...state,\n        status: \"active\",\n        secondsRemaining: state.questions.length * SECS_PER_QUESTION,\n      };\n    case \"newAnswer\":\n      const question = state.questions.at(state.index);\n\n      return {\n        ...state,\n        answer: action.payload,\n        points:\n          action.payload === question.correctOption\n            ? state.points + question.points\n            : state.points,\n      };\n    case \"nextQuestion\":\n      return { ...state, index: state.index + 1, answer: null };\n    case \"finish\":\n      return {\n        ...state,\n        status: \"finished\",\n        highscore:\n          state.points > state.highscore ? state.points : state.highscore,\n      };\n    case \"restart\":\n      return { ...initialState, questions: state.questions, status: \"ready\" };\n\n    case \"tick\":\n      return {\n        ...state,\n        secondsRemaining: state.secondsRemaining - 1,\n        status: state.secondsRemaining === 0 ? \"finished\" : state.status,\n      };\n\n    default:\n      throw new Error(\"Action unkonwn\");\n  }\n}\n\nfunction QuizProvider({ children }) {\n  const [\n    { questions, status, index, answer, points, highscore, secondsRemaining },\n    dispatch,\n  ] = useReducer(reducer, initialState);\n\n  const numQuestions = questions.length;\n  const maxPossiblePoints = questions.reduce(\n    (prev, cur) => prev + cur.points,\n    0\n  );\n\n  useEffect(function () {\n    // fetch(\"http://localhost:9000/questions\")\n    fetch(\"/questions.json\")\n      .then((res) => res.json())\n      .then((data) =>\n        dispatch({ type: \"dataReceived\", payload: data.questions })\n      )\n      .catch((err) => dispatch({ type: \"dataFailed\" }));\n  }, []);\n\n  return (\n    <QuizContext.Provider\n      value={{\n        questions,\n        status,\n        index,\n        answer,\n        points,\n        highscore,\n        secondsRemaining,\n        numQuestions,\n        maxPossiblePoints,\n\n        dispatch,\n      }}\n    >\n      {children}\n    </QuizContext.Provider>\n  );\n}\n\nfunction useQuiz() {\n  const context = useContext(QuizContext);\n  if (context === undefined)\n    throw new Error(\"QuizContext was used outside of the QuizProvider\");\n  return context;\n}\n\nexport { QuizProvider, useQuiz };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}